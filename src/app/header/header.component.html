<div class="top-nav-block"></div>

<nav
  class="header-navbar navbar navbar-expand-lg selected-header"
>
  <div class="collapse navbar-collapse">
    <a
      *ngIf="router.url.includes('/profile')"
      class="navbar-brand selected-header-link d-flex"
      routerLink="/profile"
      routerLinkActive="active"
    ><span class="mx-auto">Profile</span></a>
    <a
      *ngIf="router.url.includes('/blog')"
      class="navbar-brand selected-header-link d-flex"
      routerLink="/blog"
      routerLinkActive="active"
    ><span class="mx-auto">Blog</span></a>
    <a
      *ngIf="router.url.includes('/talk')"
      class="navbar-brand selected-header-link d-flex"
      routerLink="/talk"
      routerLinkActive="active"
    ><span class="mx-auto">Talk</span></a>
  </div>
</nav>

<nav
  class="header-navbar navbar navbar-expand-lg navbar-dark bg-dark fixed-top header-common"
  [class.main-header]="router.url.includes('/main')"
  [class.talk-header]="router.url.includes('/talk')"
  [class.blog-header]="router.url.includes('/blog')"
  [class.profile-header]="router.url.includes('/profile')"
>
  <button class="navbar-toggler nav-collapse-button" type="button" data-bs-toggle="collapse" data-bs-target="#navbarTopCollapse" aria-controls="navbarTopCollapse" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarTopCollapse">
    <a
      *ngIf="!router.url.includes('/profile')"
      class="navbar-brand header-link"
      routerLink="/profile"
      routerLinkActive="active"
    >Profile</a>
    <a
      *ngIf="!router.url.includes('/blog')"
      class="navbar-brand header-link"
      routerLink="/blog"
      routerLinkActive="active"
    >Blog</a>
    <a
      *ngIf="!router.url.includes('/talk')"
      class="navbar-brand header-link"
      routerLink="/talk"
      routerLinkActive="active"
    >Talk</a>

    <!-- Right Side -->
    <div style="margin-left:auto;margin-right:12px">
      <div class="input-group">
        <input
          [value]="searchValue"
          (keyup)="changeSearch($event)"
          class="search-input form-control ms-2"
          type="search"
          list="staticUserIds"
          placeholder="Search"
          aria-label="Search"
        >
  
        <div
          class="dropdown-menu search-drop-down"
          [class.show]="searchValue&&!isSearchValueSelected"
        >
          <div
            *ngFor="let result of searchResults | async"
            class="d-flex ms-2"
            (click)="setSearchValue(result.aboutContent.userName)"
          >
            <img class="rounded-circle search-profile" [src]="getSearchProfileImage(result)">
            <a>
              {{result.aboutContent.userName}}
              <br>
              ({{result.aboutContent.email}})
            </a>
          </div>
          <a
            class="dropdown-item"
            (click)="closeSearchListDropDown()"
          >Close</a>
        </div>
    
        <div [class]="searchValue&&isSearchValueSelected?'dropdown-menu show':'dropdown-menu'">
          <a
            class="dropdown-item"
            (click)="routerHelper.goToProfile({userName:searchValue})"
          >{{searchValue}}'s Profile</a>
          <a
            class="dropdown-item"
            (click)="routerHelper.goToBlogPrologue({userName:searchValue})"
          >{{searchValue}}'s Blog</a>
          <a
            class="dropdown-item"
            (click)="routerHelper.goToTalk({userName:searchValue})"
          >{{searchValue}}'s Talk</a>
          <a
            class="dropdown-item"
            (click)="closeProfileLinkDropDown()"
          >Close</a>
        </div>
      </div>
    </div>

    <button
      *ngIf="authService.isSignedIn()"
      class="btn btn-secondary sign-in-button"
      (click)="authService.onSignOut()"
    >Sign Out</button>
    <button
      *ngIf="!authService.isSignedIn()"
      routerLink="/sign-in"
      routerLinkActive="active"
      class="btn btn-secondary sign-in-button"
    >Sign In</button>
  </div>
</nav>
