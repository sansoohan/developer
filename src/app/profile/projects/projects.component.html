<section class="resume-section p-3 p-lg-5 d-flex flex-column" id="projects">
  <div class="my-auto">
    <h2 class="mb-5">Projects</h2>
    <div *ngIf="!isEditing">
      <div *ngFor="let project of projectsContent.projects" class="resume-item d-flex flex-column flex-md-row mb-5">
        <div class="resume-content mr-auto">
          <h3 class="mb-0">{{project.organization}}</h3>
          <div class="subheading mb-3 mt-3">{{project.projectName}}</div>
          <div>Members: {{project.memberNum}}</div>
          <div>Position: {{project.position}}</div>
          <div *ngFor="let taskDescription of project.taskDescriptions; index as i">Task Description{{i+1}}: {{taskDescription}}</div>
        </div>
        <div class="resume-date text-md-right">
          <span class="text-primary">
            {{project.startedAt ? project.startedAt.toLocaleString('en-us',{month:'short', year:'numeric'}) : 'None'}}
             - 
            {{project.finishedAt ? project.finishedAt.toLocaleString('en-us',{month:'short', year:'numeric'}) : 'Now'}}
          </span>
        </div>
      </div>
    </div>

    <div *ngIf="isEditing" [formGroup]="profileForm">
      <div formGroupName='projectsContent'>
        <div formArrayName='projects'>
          <div *ngFor="let project of profileForm.controls.projectsContent.controls.projects.controls; let i=index">
            <div [formGroupName]="i">
              <div class="container mb-5">
                <div class="row">
                  <div class="col-12">Organization Name</div>
                  <input type="text" class="form-control col-11" placeholder="Organization Name" formControlName="organization">
                  <div class="col-1" style="padding: 0;">
                    <app-input-add-remove [targetArray]="profileForm.controls.projectsContent.controls.projects.controls" [targetArrayIndex]="i" [newObject]="newProjectDescription"></app-input-add-remove>
                  </div>
      
                  <div class="col-12">Project Name</div>
                  <input type="text" class="form-control col-12" placeholder="Project Name" formControlName="projectName">
      
                  <div class="col-6">Member Number</div>
                  <div class="col-6">Your Positioin</div>
                  <input type="text" class="form-control col-6" placeholder="Member Number" formControlName="memberNum">
                  <input type="text" class="form-control col-6" placeholder="Your Positioin" formControlName="position">
                </div>

                <div class="row">
                  <div class="col-6">Started At</div>
                  <div class="col-6">Finished At</div>
                  <div class="col-6">
                    <input type="month" formControlName="startedAt">
                  </div>
                  <div class="col-6">
                    <input type="month" formControlName="finishedAt">
                  </div>
                </div>

                <div class="row">
                  <div class="col-1"></div>
                  <div class="col-11">Task Descriptions</div>
                </div>
                <div formArrayName='taskDescriptions'>
                  <div *ngFor="let description of project.controls.taskDescriptions.controls; let j=index">
                    <div class="row">
                      <div class="col-1"></div>
                      <input type="text" class="form-control col-10" placeholder="Description" [formControlName]="j">
                      <div class="col-1" style="padding: 0;">
                        <app-input-add-remove [targetArray]="project.controls.taskDescriptions.controls" [targetArrayIndex]="j" [newObject]="newTaskDescription"></app-input-add-remove>
                      </div>
                    </div>
                  </div>  
                </div>
              </div>
        
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>